/*! CKP - KeePass integration for Chromeâ„¢, Copyright 2015 Steven Campbell
*/
function ChooseFileController($scope,$location,passwordFileStoreRegistry,settings){"use strict";$scope.errorMessage="",$scope.successMessage="",$scope.databases=[],passwordFileStoreRegistry.listFileManagers("listDatabases").forEach(function(provider){provider.listDatabases().then(function(databases){databases&&databases.length&&(databases.forEach(function(database){database.provider=provider}),$scope.databases=$scope.databases.concat(databases))}).then(function(){$scope.$apply()})}),$scope.chooseDatabase=function(database){var info=database.provider.getDatabaseChoiceData(database);settings.saveCurrentDatabaseChoice(info,database.provider).then(function(){$location.path("/enter-password/"+database.provider.key+"/"+encodeURIComponent(database.title)),$scope.$apply()})}}